{% extends "themes/NeoLearn/base.html" %}
{% load static %}

{% block title %}Nova avaliação - {{ course.title }} | {{ school.name }}{% endblock %}

{% block content %}
<!-- ======= Breadcrumbs ======= -->
<div class="breadcrumbs">
  <a href="{% url 'course_detail' school.slug course.id %}">{{ course.title|title }}</a>
    <a href="{% url 'assessment_list' school.slug course.id %}">Avaliações</a>
  <strong>Criar Avaliação</strong>
</div>

 <!-- ======= Page Hearder ======= -->
<div class="page-header">
  {% include "themes/NeoLearn/components/page_header.html" with title="Criar nova avaliação" subtitle="Defina os parâmetros da prova, APOL, atividade ou quiz." %}
</div>


<div class="form-section">
  <form method="post" class="form">
    {% csrf_token %}

    <div class="form-grid two-cols">
      <div class="form-group">
        <label class="form-label" for="id_title">Título da avaliação</label>
        <input class="form-input" type="text" id="id_title" name="title" class="input" required>
      </div>

      <div class="form-group">
        <label class="form-label" for="id_type">Tipo</label>
        <select class="form-select" id="id_type" name="type" class="input">
          <option value="quiz">Quiz / Objetiva</option>
          <option value="apol">APOL / Avaliação Oficial</option>
          <option value="essay">Dissertativa</option>
          <option value="file_upload">Envio de Arquivo</option>
          <option value="practice">Atividade Prática</option>
          <option value="final_exam">Prova Final</option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label" for="id_subject">Matéria (opcional)</label>
        <select class="form-select" id="id_subject" name="subject" class="input">
          <option value="">-- Não vincular a matéria específica --</option>
          {% for s in subjects %}
            <option value="{{ s.id }}">{{ s.title }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="form-group">
        <label class="form-label" for="id_weight">Peso na nota (%)</label>
        <input class="form-input"  type="number" id="id_weight" name="weight" class="input" value="10" min="0" max="100" step="0.1">
      </div>

      <div class="form-group">
        <label class="form-label" for="id_attempts">Tentativas permitidas</label>
        <input class="form-input"  type="number" id="id_attempts" name="attempts_allowed" class="input" value="1" min="1">
      </div>

      <div class="form-group">
        <label class="form-label" for="id_time_limit">Tempo limite (minutos)</label>
        <input class="form-input"  type="number" id="id_time_limit" name="time_limit" class="input" placeholder="ex: 60">
        <small class="helper-text">Deixe em branco para sem limite de tempo.</small>
      </div>

      <div class="form-group">
        <label class="form-label" for="id_open_at">Data / hora de abertura</label>
        <input class="form-input"  type="datetime-local" id="id_open_at" name="open_at" class="input">
      </div>

      <div class="form-group">
        <label class="form-label" for="id_close_at">Data / hora de fechamento</label>
        <input class="form-input"  type="datetime-local" id="id_close_at" name="close_at" class="input">
      </div>

    </div>

    <div class="form-group">
      <label class="form-label" for="id_description">Descrição / instruções para o aluno</label>
      <textarea class="form-textarea" id="id_description" name="description" class="textarea" rows="4"
                placeholder="Explique o objetivo da avaliação, critérios, regras, etc."></textarea>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-primary">Salvar avaliação</button>

      <a href="{% url 'assessment_list' school.slug course.id %}" class="btn btn-outline">
        Cancelar
      </a>
    </div>

  </form>
</div>


{% endblock %}
