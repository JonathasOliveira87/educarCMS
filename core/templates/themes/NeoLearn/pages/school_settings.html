{% extends "themes/NeoLearn/base.html" %}

{% load static %}

{% block title %}ConfiguraÃ§Ãµes - {{ school.name }}{% endblock %}


{% block content %}
<div class="settings-container">

  <!-- ======= Page Hearder ======= -->
  <div class="page-header">
    {% include "themes/NeoLearn/components/page_header.html" with title="ConfiguraÃ§Ãµes" subtitle="Gerencie as informaÃ§Ãµes e aparÃªncia da sua escola" %}
  </div>


    <!-- Card Principal -->
    <div class="settings-card">
        <div class="card-header">
            <h4>ğŸ“‹ Perfil da Escola</h4>
        </div>
        <div class="card-body">
            <form method="POST" action="{% url 'school_settings_update' slug=school.slug %}" enctype="multipart/form-data">
                {% csrf_token %}
                
                <!-- Logo -->
                <div class="logo-section">
                    <div class="logo-preview-wrapper">
                        {% if school.logo %}
                            <img src="{{ school.logo.url }}" alt="Logo" class="logo-preview">
                        {% else %}
                            <div class="logo-placeholder">
                                <i>ğŸ«</i>
                            </div>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        <label for="logo" class="form-label">ğŸ“· Alterar Logo</label>
                        <input type="file" class="form-input" id="logo" name="logo" accept="image/*">
                        <small class="form-text">âœ¨ Formatos: JPG, PNG, GIF â€¢ Tamanho mÃ¡ximo: 2MB</small>
                    </div>
                </div>

                <!-- Nome da Escola -->
                <div class="form-group">
                    <label for="school_name" class="form-label">ğŸ« Nome da Escola *</label>
                    <input type="text" class="form-input" id="school_name" name="school_name" 
                            value="{{ school.name }}" required placeholder="Digite o nome da escola">
                </div>

                <!-- Slogan -->
                <div class="form-group">
                    <label for="slogan" class="form-label">ğŸ’¬ Slogan</label>
                    <input type="text" class="form-input" id="slogan" name="slogan" 
                            value="{{ school.slogan|default:'' }}" placeholder="Ex: EducaÃ§Ã£o para o futuro">
                    <small class="form-text">Uma frase que representa sua escola</small>
                </div>

                <!-- Badge -->
                <div class="form-group">
                    <label for="badge" class="form-label">ğŸ† Badge/Distintivo</label>
                    <input type="text" class="form-input" id="badge" name="badge" 
                            value="{{ school.badge|default:'' }}" placeholder="Ex: Escola Premium â­">
                    <small class="form-text">Selo ou distintivo especial</small>
                </div>

                <hr class="divider">

                <h5 class="section-title">ğŸ“ InformaÃ§Ãµes de Contato</h5>

                <!-- Grid para E-mail e Telefone -->
                <div class="form-row">
                    <!-- E-mail -->
                    <div class="form-group">
                        <label for="contact_email" class="form-label">ğŸ“§ E-mail de Contato</label>
                        <input type="email" class="form-input" id="contact_email" name="contact_email" 
                                value="{{ school.email|default:'' }}" placeholder="contato@escola.com">
                    </div>

                    <!-- Telefone -->
                    <div class="form-group">
                        <label for="phone" class="form-label">ğŸ“± Telefone</label>
                        <input type="tel" class="form-input" id="phone" name="phone" 
                                value="{{ school.telephone|default:'' }}" placeholder="(00) 00000-0000">
                    </div>
                </div>

                <!-- BotÃµes -->
                <div class="button-group">
                    <button type="reset" class="btn btn-secondary">
                        <span>âŒ</span> Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <span>âœ…</span> Salvar AlteraÃ§Ãµes
                    </button>
                </div>
            </form>
        </div>
    </div>
    
</div>

<script>
// Preview da imagem antes do upload
document.getElementById('logo').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(event) {
            const wrapper = document.querySelector('.logo-preview-wrapper');
            wrapper.innerHTML = `<img src="${event.target.result}" alt="Preview" class="logo-preview">`;
        };
        reader.readAsDataURL(file);
    }
});
</script>
{% endblock %}